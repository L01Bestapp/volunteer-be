# Render Blueprint for Volunteer Management System
# https://render.com/docs/blueprint-spec

services:
  # Spring Boot Backend
  - type: web
    name: volunteer-backend
    env: docker
    region: singapore
    plan: free
    branch: main
    dockerfilePath: ./Dockerfile
    healthCheckPath: /actuator/health
    autoDeploy: true
    envVars:
      # Profile
      - key: SPRING_PROFILES_ACTIVE
        value: prod

      # Database (auto-linked from PostgreSQL service)
      - key: SPRING_DATASOURCE_URL
        fromDatabase:
          name: volunteer-db
          property: connectionString

      # JWT (uses PEM files in resources/certs)
      - key: EXP_TOKEN
        value: 604800
      - key: EXP_REFRESH_TOKEN
        value: 2592000
      - key: JWT_KEY_ID
        value: ctxh-key

      # Mail - CẦN THÊM trong Render Dashboard
      # - key: MAIL_SENDER_USERNAME
      #   value: your-email@gmail.com
      # - key: MAIL_SENDER_PASSWORD
      #   value: your-app-password

      # Cloudinary - CẦN THÊM trong Render Dashboard
      # - key: CLOUDINARY_CLOUD_NAME
      #   value: your-cloud-name
      # - key: CLOUDINARY_API_KEY
      #   value: your-api-key
      # - key: CLOUDINARY_API_SECRET
      #   value: your-api-secret

      # Google OAuth - CẦN THÊM trong Render Dashboard
      # - key: GOOGLE_CLIENT_ID
      #   value: your-client-id
      # - key: GOOGLE_CLIENT_SECRET
      #   value: your-client-secret
      # - key: OAUTH2_REDIRECT_URI
      #   value: https://volunteer-backend.onrender.com/login/oauth2/code/google

      # Base URL - UPDATE sau khi có Render URL
      # - key: BASE_URL_WEBSITE
      #   value: https://volunteer-backend-xxx.onrender.com

databases:
  # PostgreSQL Database (Free 90 days)
  - name: volunteer-db
    databaseName: volunteer_db
    user: volunteer
    region: singapore
    plan: free
